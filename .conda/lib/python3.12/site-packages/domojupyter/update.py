import os
import requests


def check_version(current):
    conda_channel = os.getenv('DOMO_CONDA_CHANNEL', None)
    if conda_channel is None:
        print("Unable to check domojupyter version - Domo Conda channel not configured.")
        return
    r = requests.get(f'{conda_channel}/channeldata.json')
    channel_data = r.json()

    packages = channel_data['packages']
    latest = packages['domojupyter']['version']
    if current < latest:
        print(f"A newer version of domojupyter is available. Update domojupyter with the following command:")
        print(f"\n\tconda install -c {conda_channel} domojupyter={latest}")
