from typing import Optional

from domojupyter.ai.models.DataSourceSchema import DataSourceSchema
from domojupyter.ai.models.PromptTemplate import PromptTemplate


class TextToBeastModeRequest:
    def __init__(self, input_str: str,
                 data_source_schemas: Optional[DataSourceSchema],
                 prompt_template: Optional[PromptTemplate],
                 parameters: Optional[dict[str, str]],
                 model: Optional[str],
                 model_configuration: Optional[dict[str, object]]):
        self.input = input_str
        self.dataSourceSchemas = data_source_schemas
        self.promptTemplate = prompt_template
        self.parameters = parameters
        self.model = model
        self.modelConfiguration = model_configuration

    def to_json(self):
        return {
            "input": self.input,
            "dataSourceSchemas": self.dataSourceSchemas.to_json() if self.dataSourceSchemas is not None else None,
            "promptTemplate": self.promptTemplate.to_json() if self.promptTemplate is not None else None,
            "parameters": self.parameters,
            "model": self.model,
            "modelConfiguration": self.modelConfiguration
        }
