from typing import Optional

from domojupyter.ai.models.SeparatorType import SeparatorType


"""
ChunkingConfiguration

Parameters:
    max_chunk_size (int): maximum chunk size
    chunk_overlap (int): chunk overlap
    separators (list[str]): list of separators
    separator_type (SeparatorType): separator type
    disallow_intermediate_chunks (bool): disallow intermediate chunks
"""
class ChunkingConfiguration:
    def __init__(self, max_chunk_size: Optional[int],
                 chunk_overlap: Optional[int],
                 separators: Optional[list[str]],
                 separator_type: Optional[SeparatorType],
                 disallow_intermediate_chunks: Optional[bool]):
        self.maxChunkSize = max_chunk_size
        self.chunkOverlap = chunk_overlap
        self.separators = separators
        self.separatorType = separator_type
        self.disallowIntermediateChunks = disallow_intermediate_chunks

    def to_json(self):
        return {
            "maxChunkSize": self.maxChunkSize,
            "chunkOverlap": self.chunkOverlap,
            "separators": self.separators,
            "separatorType": self.separatorType.value[0]
            if type(self.separatorType) is SeparatorType else self.separatorType,
            "disallowIntermediateChunks": self.disallowIntermediateChunks
        }
