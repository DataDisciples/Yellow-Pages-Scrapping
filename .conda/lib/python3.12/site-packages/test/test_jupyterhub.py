from . import config
from domojupyter.jupyterhub import Jupyterhub

import pytest

jupyterhub_services_url = config.jupyterhub_services_url
jupyterhub_api_token = config.jupyterhub_api_token 
workspace_id = config.workspace_id
workspace_session_id = config.workspace_session_id


@pytest.mark.integration
def test_get_domo_access_token():
    jupyterhub = Jupyterhub(jupyterhub_services_url, jupyterhub_api_token, workspace_id, workspace_session_id)

    access_token = jupyterhub.get_domo_access_token()

    print("Expires in: " + str(access_token['expires_in']))

    print("Token: " + access_token['access_token'])

    assert access_token is not None
    assert access_token['access_token'] is not None


@pytest.mark.integration
def test_get_workspace():
    jupyterhub = Jupyterhub(jupyterhub_services_url, jupyterhub_api_token, workspace_id, workspace_session_id)

    workspace = jupyterhub.get_workspace()

    print(workspace)
    assert workspace is not None
    assert workspace['inputConfiguration'] is not None